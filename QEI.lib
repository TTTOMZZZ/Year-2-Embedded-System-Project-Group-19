http://os.mbed.com/teams/Bluewind/code/QEI/#c390ea9c642eaade3f59e9f5e42315e3af04d7df